@model QuanLyQuanNuoc_65130449.Models.KhachHang
@{
    ViewBag.Title = "Chỉnh sửa thông tin";
    Layout = "~/Views/Shared/_LayoutKhachHang.cshtml";
}

<h2 class="text-2xl font-bold mb-4">Chỉnh sửa thông tin</h2>
@if (ViewBag.Success != null)
{
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
        @ViewBag.Success
    </div>
}

@using (Html.BeginForm("EditAccount", "KhachHangController_65130449", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.MaKH)

    <div class="mb-4">
        <label>Họ và Tên</label>
        @Html.TextBoxFor(m => m.HoTen, new { @class = "w-full border px-3 py-2 rounded" })
    </div>

    <div class="mb-4">
        <label>Số điện thoại</label>
        @Html.TextBoxFor(m => m.SoDienThoai, new { @class = "w-full border px-3 py-2 rounded" })
    </div>

    <div class="mb-4">
        @Html.LabelFor(m => m.Email)
        @Html.TextBoxFor(m => m.Email, new { @class = "w-full border px-3 py-2 rounded" })
    </div>

    <hr class="my-4" />

    <h3 class="font-semibold mb-2">Đổi mật khẩu</h3>

    <div>
        <label>Mật khẩu cũ</label>
        <input type="password" name="MatKhauCu" class="border p-2 w-full" />
    </div>

    <div class="mt-4">
        <label>Mật khẩu mới</label>
        <input type="password" id="MatKhauMoi" name="MatKhauMoi"
               class="border p-2 w-full rounded" />
    </div>

    <div class="mt-4">
        <label>Xác nhận mật khẩu</label>
        <input type="password" id="XacNhanMatKhau" name="XacNhanMatKhau"
               class="border p-2 w-full rounded" />

        <!-- Hiển thị lỗi của ô xác nhận -->
        @Html.ValidationMessage("XacNhanMatKhau", "", new { @class = "text-red-600 text-sm mt-1 block" })
    </div>


    <!-- Checkbox hiện mật khẩu -->
    <div class="mt-2 flex items-center">
        <input type="checkbox" id="togglePassword" class="mr-2" onclick="showPassword()" />
        <label for="togglePassword" class="cursor-pointer">Hiện mật khẩu</label>
    </div>

    <script>
        function showPassword() {
            var pw1 = document.getElementById("MatKhauMoi");
            var pw2 = document.getElementById("XacNhanMatKhau");
            var chk = document.getElementById("togglePassword");

            if (chk.checked) {
                pw1.type = "text";
                pw2.type = "text";
            } else {
                pw1.type = "password";
                pw2.type = "password";
            }
        }
    </script>

    <button type="submit" class="bg-sky-500 hover:bg-sky-600 text-white px-4 py-2 rounded shadow-md shadow-emerald-200/70">
        Lưu thay đổi
    </button>
    <!-- Nút quay lại hồ sơ -->
    <a href="@Url.Action("MyAccount", "KhachHangController_65130449")"
       class="inline-block mb-4 bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded">
        ← Quay lại hồ sơ
    </a>

}




@section scripts{
    <script>
        document.getElementById("showPassword").addEventListener("change", function () {
            var pwd = document.getElementById("password");
            pwd.type = this.checked ? "text" : "password";
        });
    </script>
}
